<html>
<head>
<link href="Style.css" rel="stylesheet", type="text/css"/>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.3.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script src="gc.js"></script>
<script type="text/javascript">
// Global Variables
var courseData = []
var invalidData = []
var validCourses = []
$(document).ready(function(){
    $.getJSON("example.json", function(data) {
        courseData = JSON.parse(JSON.stringify(data))
    })
    .fail(function(d, text, error){alert("error in getJson!" + text + error)})
});
</script>
</head>
<body>
<script>
$(function() {
$("#error_msg").hide()
$(".inputform").on("mouseenter", ".courseInput", function() {
    if ($(this).attr("valid") == "false") {
        var offset = $(this).offset()
        offset.top = offset.top + $(this).outerHeight()
        $("#error_msg").css("display", "block")
        $("#error_msg").offset(offset)
        $("#error_msg").text(GetErrorMessage($(this).val()))
    }
})
.on("mouseleave", ".courseInput", function() {
    $("#error_msg").css("display", "none")
})
.on("blur", ".courseInput", function() {
    if ($(this).val() == "") {
        $(this).attr("valid", "na")
    } else {
        $(this).attr("valid", "true")
    }
    RefreshInputs()
})
.on("focus", ".courseInput", function() {
    $(".courseInput").autocomplete(
        {source: courseData}) 
})
.on("click", ".courseInputRemove", function() {
    $(this).parent().remove()
    invalidData = ValidateAllInput(curData)
})
$(".addInputButton").click(function() {
    var newInput = "<div class='courseInputWrapper'><button class='courseInputRemove'><img src='image/remove.png' class='remove_button'></button><input class='courseInput'>"
    $(this).parent().find("form").append(newInput)  
})
function RefreshInputs(){
    var curData = []
    $(".courseInput").each(function(){
        if ($(this).val() != '') {
            var tempdata = {course:$(this).val(), semester:$(this).parent().parent().attr("semester")}
            curData.push(tempdata)
        }
    })
    invalidData = ValidateAllInput(curData)
    $(".courseInput").each(function() {
        if (IsValid($(this).val())) {
            $(this).attr("valid", "true")
            console.log("true" + $(this).val())
        } else {
            $(this).attr("valid", "false")
            console.log("false" + $(this).val())
        }
    })
}
})
</script>

<div class="year">
<div class="inputform" inputNum="2">
<form semester="freshman_summer">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_freshman_summer_1" type="text" group="freshman_summer_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_freshman_summer_2" type="text" group="freshman_summer_2">
    </div>
</form>
    <button class="addInputButton" semester="freshman summer"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="freshman_fall">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_freshman_fall_1" type="text" group="freshman_fall_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_freshman_fall_2" type="text" group="freshman_fall_2">
    </div>
</form>
    <button class="addInputButton" semester="freshman fall"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="freshman_winter">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_freshman_winter_1" type="text" group="freshman_winter_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_freshman_winter_2" type="text" group="freshman_winter_2">
    </div>
</form>
    <button class="addInputButton" semester="freshman winter"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="freshman_spring">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_freshman_spring_1" type="text" group="freshman_spring_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_freshman_spring_2" type="text" group="freshman_spring_2">
    </div>
</form>
    <button class="addInputButton" semester="freshman spring"><img src="image/add.jpg" class="add_button"></button>
</div>
</div>
<div class="year">
<div class="inputform" inputNum="2">
<form semester="sophomore_summer">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_sophomore_summer_1" type="text" group="sophomore_summer_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_sophomore_summer_2" type="text" group="sophomore_summer_2">
    </div>
</form>
    <button class="addInputButton" semester="sophomore summer"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="sophomore_fall">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_sophomore_fall_1" type="text" group="sophomore_fall_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_sophomore_fall_2" type="text" group="sophomore_fall_2">
    </div>
</form>
    <button class="addInputButton" semester="sophomore fall"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="sophomore_winter">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_sophomore_winter_1" type="text" group="sophomore_winter_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_sophomore_winter_2" type="text" group="sophomore_winter_2">
    </div>
</form>
    <button class="addInputButton" semester="sophomore winter"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="sophomore_spring">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_sophomore_spring_1" type="text" group="sophomore_spring_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_sophomore_spring_2" type="text" group="sophomore_spring_2">
    </div>
</form>
    <button class="addInputButton" semester="sophomore spring"><img src="image/add.jpg" class="add_button"></button>
</div>
</div>
<div class="year">
<div class="inputform" inputNum="2">
<form semester="junior_summer">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_junior_summer_1" type="text" group="junior_summer_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_junior_summer_2" type="text" group="junior_summer_2">
    </div>
</form>
    <button class="addInputButton" semester="junior summer"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="junior_fall">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_junior_fall_1" type="text" group="junior_fall_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_junior_fall_2" type="text" group="junior_fall_2">
    </div>
</form>
    <button class="addInputButton" semester="junior fall"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="junior_winter">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_junior_winter_1" type="text" group="junior_winter_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_junior_winter_2" type="text" group="junior_winter_2">
    </div>
</form>
    <button class="addInputButton" semester="junior winter"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="junior_spring">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_junior_spring_1" type="text" group="junior_spring_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_junior_spring_2" type="text" group="junior_spring_2">
    </div>
</form>
    <button class="addInputButton" semester="junior spring"><img src="image/add.jpg" class="add_button"></button>
</div>
</div>
<div class="year">
<div class="inputform" inputNum="2">
<form semester="senior_summer">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_senior_summer_1" type="text" group="senior_summer_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_senior_summer_2" type="text" group="senior_summer_2">
    </div>
</form>
    <button class="addInputButton" semester="senior summer"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="senior_fall">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_senior_fall_1" type="text" group="senior_fall_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_senior_fall_2" type="text" group="senior_fall_2">
    </div>
</form>
    <button class="addInputButton" semester="senior fall"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="senior_winter">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_senior_winter_1" type="text" group="senior_winter_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_senior_winter_2" type="text" group="senior_winter_2">
    </div>
</form>
    <button class="addInputButton" semester="senior winter"><img src="image/add.jpg" class="add_button"></button>
</div>
<div class="inputform" inputNum="2">
<form semester="senior_spring">
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_senior_spring_1" type="text" group="senior_spring_1">
    </div>
    <div class="courseInputWrapper">
    <button class="courseInputRemove"><img src="image/remove.png" class="remove_button"></button>
    <input class="courseInput" id="ip_senior_spring_2" type="text" group="senior_spring_2">
    </div>
</form>
    <button class="addInputButton" semester="senior spring"><img src="image/add.jpg" class="add_button"></button>
</div>
</div>


<textarea id="error_msg" readonly></textarea>
<button>click me</button>
<p id="output"></p>
</body>
</html>
